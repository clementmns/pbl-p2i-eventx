<div>
    <div class="flex items-center gap-3 mb-4">
        <h2 class="text-2xl font-bold">Your Wishlist</h2>
    </div>
    {% if wishlist is defined and wishlist|length > 0 %}
    <div>
        <ul class="space-y-4">
            {% for event in wishlist %}
            <div class="bg-white border border-gray-300">
                <div class="p-4 border-b border-gray-200">
                    <div class="flex items-center gap-3">
                        <h3 class="text-lg font-bold text-gray-800">{{ event.name }}</h3>
                    </div>
                </div>
                <div class="p-4">
                    <p class="text-gray-700 mb-4 text-sm">{{ event.description }}</p>
                    <div class="grid grid-cols-2 gap-2 mb-4">
                        <div class="flex items-center gap-2">
                            <div class="w-6 h-6 flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clock-icon lucide-clock"><path d="M12 6v6l4 2"/><circle cx="12" cy="12" r="10"/></svg>
                            </div>
                            <div class="text-xs">
                                <div class="text-gray-500">Start</div>
                                <div class="text-gray-900">{{ event.startDate|date('F j, Y \a\t H:i') }}</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="w-6 h-6 flex items-center justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin-icon lucide-pin"><path d="M12 17v5"/><path d="M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"/></svg>
                            </div>
                            <div class="text-xs">
                                <div class="text-gray-500">Location</div>
                                <div class="text-gray-900">{{ event.place }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="flex gap-2">
                        <form method="post" action="/wishlist/remove" class="flex-1">
                            <input type="hidden" name="eventId" value="{{ event.id }}">
                            <button type="submit" class="cursor-pointer flex gap-2 items-center justify-center w-full py-1.5 px-3 bg-gray-800 text-white font-medium text-xs hover:bg-gray-700 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x-icon lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                                Remove
                            </button>
                        </form>
                        {% set isJoined = false %}
                        {% for joined in joinedEvents %}
                            {% if joined.id == event.id %}
                                {% set isJoined = true %}
                            {% endif %}
                        {% endfor %}
                        {% if not isJoined %}
                            <form method="post" action="/events/join" class="flex-1">
                                <input type="hidden" name="eventId" value="{{ event.id }}">
                                <button type="submit" class="cursor-pointer flex gap-2 items-center justify-center w-full py-1.5 px-3 bg-green-600 text-white font-medium text-xs hover:bg-green-700 transition-colors">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus-icon lucide-plus"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                                    Join
                                </button>
                            </form>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </ul>
    </div>
    {% else %}
        <div class="text-gray-500">Your wishlist is empty.</div>
    {% endif %}
</div>
